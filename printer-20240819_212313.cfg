[include tmc5160.cfg]
[include tmc2209.cfg]
[include mainsail.cfg]
[include tempsensors.cfg]
[include fans.cfg]
[include mcu.cfg]
[include THR.cfg]
[include beacon.cfg]
[include config_backup.cfg]
[include TEST_SPEED.cfg]
[include ztilt.cfg]
[include macros.cfg]
[include reshelper.cfg]
[include KAMP_Settings.cfg]

[exclude_object]

##========================== Pin Definitions ========================
## X
## Drive0_STEP_PIN         PE2
## Drive0_DIR_PIN          PC5
## Drive0_ENABLE_PIN       PF11
## Drive0_STOP_PIN         PG12 #IO0
## Drive0_UART_PIN         PC4

## Y
## Drive1_STEP_PIN         PE3
## Drive1_DIR_PIN          PF13
## Drive1_ENABLE_PIN       PF14
## Drive1_STOP_PIN         PG11 #IO1
## Drive1_UART_PIN         PF12

## E
## Drive2_STEP_PIN         PE4
## Drive2_DIR_PIN          PG0
## Drive2_ENABLE_PIN       PG1
## Drive2_STOP_PIN         PG10 #IO2
## Drive2_UART_PIN         PF15

## Z
## Drive3_STEP_PIN         PE14
## Drive3_DIR_PIN          PE8
## Drive3_ENABLE_PIN       PE9
## Drive3_STOP_PIN         PG9 #IO3
## Drive3_UART_PIN         PE7

## Z1
## Drive4_STEP_PIN         PE15
## Drive4_DIR_PIN          PE11
## Drive4_ENABLE_PIN       PF2
## Drive4_UART_PIN         PE10

## Z2
## Drive5_STEP_PIN         PE1
## Drive5_DIR_PIN          PF0
## Drive5_ENABLE_PIN       PC15
## Drive5_UART_PIN         PF1

## Z3
## Drive6_STEP_PIN         PE0
## Drive6_DIR_PIN          PG3
## Drive6_ENABLE_PIN       PG4
## Drive6_UART_PIN         PG2

## Drive7_STEP_PIN         PE6
## Drive7_DIR_PIN          PG6
## Drive7_ENABLE_PIN       PG7
## Drive7_UART_PIN         PG5

##   TMC SPI MODE
## TMC MOSI           PB4
## TMC MISO           PB5
## TMC SCK            PB3

## HEAT0              PB0
## HEAT1              PB1
## HEAT2              PC7
## HEAT3              PF7
## HEAT4              PF6

## BED                PE5

## TH0 (H0 Temp)      PF4    #ADC0
## TH1 (H1 Temp)      PF5    #ADC1
## TH2 (H2 Temp)      PF9    #ADC2
## TH3 (H3 Temp)      PF10   #ADC3
## TH4 (H4 Temp)      PC0    #ADC4
## TB  (Bed Temp)     PC1    #ADC5

## FAN0               PA0
## FAN1               PA1
## FAN2               PA2
## FAN3               PA3
## FAN4               PA15
## FAN5               PB11
## FAN6               PB10
## FAN7               PD12
## FAN8               PD14
## FAN9               PD15

## SERVO              PC6   #BLTOUCH
## PROBE			  PC3   #BLTOUCH


##########################################
# 5V # GND # PD0 # PD1 # PD3 # PD4 # PD5 #
##########################################



[printer]
kinematics: cartesian
max_velocity: 300  
max_accel: 20000
max_z_velocity: 15
max_z_accel: 350
square_corner_velocity: 5.0
#minimum_cruise_ratio: 1

[input_shaper]
shaper_freq_x: 84.6
shaper_type_x: mzv
shaper_freq_y: 84.6
shaper_type_y: mzv

########################################
# Drives
########################################

[stepper_x]
step_pin: PE0
dir_pin: PG3
enable_pin: !PG4
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
endstop_pin: !PD6
position_endstop: 0
position_min: 0
position_max: 210
homing_retract_dist: 10.0
homing_speed: 35


[stepper_x1]
step_pin: PE1
dir_pin: !PF0
enable_pin: !PC15
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper

[stepper_y]
step_pin: PE15
dir_pin: PE11
enable_pin: !PF2
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
endstop_pin: !PA8
position_endstop: 5
position_min: 5
position_max: 227
homing_retract_dist: 10.0
homing_speed: 35

[stepper_y1]
step_pin: PE14
dir_pin: PE8
enable_pin: !PE9
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper


[stepper_z]
step_pin: PE4
dir_pin: PG0
enable_pin: !PG1
microsteps: 128
rotation_distance: 40
gear_ratio: 4:1
full_steps_per_rotation: 200
#step_pulse_duration: 0.000004
endstop_pin: probe:z_virtual_endstop # use beacon as virtual endstop
homing_retract_dist: 0 # beacon needs this to be set to 0
position_min: -2
position_max: 185
homing_positive_dir: false
homing_speed: 40

[stepper_z1]
step_pin: PE3
dir_pin: PF13
enable_pin: !PF14
microsteps: 128
rotation_distance: 40
gear_ratio: 4:1
full_steps_per_rotation: 200


[stepper_z2]
step_pin: PE2
dir_pin: !PC5
enable_pin: !PF11
microsteps: 128
rotation_distance: 40
gear_ratio: 4:1
full_steps_per_rotation: 200


[heater_bed]
heater_pin: PB0
sensor_pin: PC0
sensor_type: Generic 3950
#control: watermark
min_temp: -50
max_temp: 200

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE12, EXP1_3=PB2, EXP1_5=PC14, EXP1_7=PG14, EXP1_9=<GND>,
    EXP1_2=PE13, EXP1_4=PG8, EXP1_6=PC13, EXP1_8=PG13, EXP1_10=<5V>,
    # EXP2 header
    EXP2_1=PA6, EXP2_3=PB7, EXP2_5=PB6, EXP2_7=PG15,  EXP2_9=<GND>,
    EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

########################################
 #Mini 12864 LCD
########################################
#[display]
#lcd_type: uc1701
#cs_pin: EXP1_3
#a0_pin: EXP1_4
#rst_pin: EXP1_5
#contrast: 63
#encoder_pins: ^EXP2_5, ^!EXP2_3
#click_pin: ^!EXP1_2
#spi_bus: spi1

#####FLY Mini12864
#[neopixel fly_mini12864]
#pin: EXP1_6
#chain_count: 3
#initial_RED: 0.1
#initial_GREEN: 0.5
#initial_BLUE: 0.0
#color_order: RGB

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 45.335
#*# pid_ki = 1.275
#*# pid_kd = 402.910
#*#
#*# [beacon model default]
#*# model_coef = 1.5090534773249367,
#*# 	  1.838965497212615,
#*# 	  0.765553421085259,
#*# 	  0.3906563208374839,
#*# 	  0.4365377859193732,
#*# 	  0.31194646500978335,
#*# 	  -0.3325493992883415,
#*# 	  -0.32473623684917635,
#*# 	  0.22271569328336543,
#*# 	  0.18735273096983787
#*# model_domain = 1.862806163424189e-07,1.9402659290058006e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 43.028807
#*# model_offset = 0.00000
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.101243, -0.099684, -0.104008, -0.106315, -0.102674, -0.097828, -0.092448, -0.087797, -0.080406, -0.071450, -0.061922, -0.051579, -0.045626, -0.033063, -0.028799, -0.028388, -0.020424, -0.014835, -0.018543, -0.019369, -0.023237, -0.017928, -0.030498, -0.033623, -0.021742, -0.015566, -0.016946, -0.007816, 0.013234, 0.031312
#*# 	  0.015571, 0.016263, 0.010590, 0.006004, 0.019628, 0.019084, 0.019883, 0.028296, 0.037053, 0.045889, 0.051826, 0.064386, 0.070817, 0.075778, 0.080525, 0.083690, 0.082731, 0.087672, 0.084190, 0.085847, 0.077819, 0.075357, 0.066936, 0.068280, 0.081280, 0.070989, 0.076906, 0.092990, 0.100741, 0.116304
#*# 	  0.048446, 0.042288, 0.052347, 0.059785, 0.049973, 0.059366, 0.082225, 0.069915, 0.077981, 0.099475, 0.097478, 0.108558, 0.119301, 0.125231, 0.125332, 0.130060, 0.127714, 0.133660, 0.133251, 0.123775, 0.115403, 0.124608, 0.114172, 0.100600, 0.119508, 0.119026, 0.093160, 0.127683, 0.140117, 0.148953
#*# 	  0.069158, 0.072861, 0.061838, 0.076071, 0.083261, 0.089304, 0.093500, 0.102935, 0.112902, 0.122414, 0.134899, 0.144303, 0.149128, 0.155686, 0.156853, 0.158517, 0.165612, 0.160006, 0.157942, 0.156578, 0.153789, 0.146006, 0.137756, 0.144258, 0.141022, 0.131447, 0.141592, 0.146060, 0.156020, 0.170653
#*# 	  0.083697, 0.082247, 0.109131, 0.090324, 0.100511, 0.120648, 0.112722, 0.131258, 0.142238, 0.154741, 0.158229, 0.178196, 0.175409, 0.175821, 0.195384, 0.185375, 0.175944, 0.198735, 0.186206, 0.170391, 0.178529, 0.179818, 0.160533, 0.162629, 0.174010, 0.171589, 0.155537, 0.174812, 0.181595, 0.184685
#*# 	  0.096994, 0.105748, 0.100174, 0.101921, 0.129333, 0.138839, 0.138468, 0.157704, 0.171822, 0.178786, 0.194531, 0.201897, 0.206244, 0.211121, 0.212413, 0.212865, 0.213645, 0.216505, 0.208443, 0.205067, 0.208721, 0.194793, 0.184993, 0.198606, 0.187316, 0.181425, 0.179224, 0.186254, 0.183949, 0.194558
#*# 	  0.108685, 0.116839, 0.116533, 0.136507, 0.144593, 0.148150, 0.162264, 0.191593, 0.193748, 0.197632, 0.235437, 0.228549, 0.223370, 0.254595, 0.240398, 0.227009, 0.246228, 0.239665, 0.223778, 0.227004, 0.233767, 0.217071, 0.206206, 0.213057, 0.202454, 0.200871, 0.199355, 0.197701, 0.200422, 0.201032
#*# 	  0.127662, 0.141861, 0.146538, 0.146757, 0.171686, 0.189245, 0.197808, 0.215120, 0.229304, 0.240744, 0.250688, 0.262351, 0.268225, 0.266085, 0.267040, 0.270399, 0.262329, 0.263307, 0.257051, 0.253193, 0.249362, 0.238177, 0.229332, 0.230945, 0.228071, 0.212710, 0.209072, 0.219460, 0.202455, 0.207106
#*# 	  0.135453, 0.142281, 0.166120, 0.186189, 0.190215, 0.200980, 0.244721, 0.240627, 0.245349, 0.283724, 0.285341, 0.279877, 0.306123, 0.301893, 0.289082, 0.294940, 0.304694, 0.284999, 0.286708, 0.289434, 0.262772, 0.269640, 0.262294, 0.243746, 0.241022, 0.239706, 0.216771, 0.218135, 0.221557, 0.212378
#*# 	  0.150957, 0.167459, 0.173050, 0.195682, 0.216926, 0.235414, 0.252199, 0.266136, 0.285992, 0.305978, 0.311697, 0.321291, 0.333276, 0.330451, 0.326611, 0.331381, 0.332986, 0.317848, 0.314334, 0.313590, 0.295148, 0.287531, 0.276051, 0.265440, 0.262501, 0.245457, 0.240283, 0.236248, 0.225341, 0.222711
#*# 	  0.151032, 0.166690, 0.207863, 0.210962, 0.224617, 0.265350, 0.278100, 0.284691, 0.318858, 0.328603, 0.330432, 0.364445, 0.356024, 0.345540, 0.361124, 0.367268, 0.338130, 0.352709, 0.353560, 0.319214, 0.311878, 0.321295, 0.299068, 0.274502, 0.288804, 0.273763, 0.231912, 0.250685, 0.239998, 0.228081
#*# 	  0.153920, 0.182650, 0.190882, 0.215791, 0.244983, 0.269150, 0.287216, 0.315273, 0.329875, 0.350301, 0.368610, 0.372118, 0.375190, 0.390857, 0.382099, 0.376059, 0.386081, 0.372592, 0.360723, 0.354943, 0.354030, 0.329339, 0.315060, 0.316604, 0.289725, 0.273591, 0.262607, 0.245478, 0.237285, 0.230558
#*# 	  0.151415, 0.176773, 0.205770, 0.222234, 0.256343, 0.280528, 0.289993, 0.337624, 0.347514, 0.353640, 0.400517, 0.408222, 0.381688, 0.405578, 0.418749, 0.383385, 0.392372, 0.404198, 0.380619, 0.353231, 0.369049, 0.346910, 0.316113, 0.320534, 0.299676, 0.286354, 0.268102, 0.246113, 0.237229, 0.224913
#*# 	  0.139969, 0.178714, 0.201671, 0.214691, 0.255741, 0.286947, 0.300301, 0.333358, 0.363675, 0.372955, 0.395328, 0.416353, 0.407301, 0.416899, 0.421793, 0.413378, 0.399559, 0.407813, 0.390022, 0.375385, 0.373644, 0.348032, 0.330446, 0.319314, 0.304434, 0.274729, 0.257489, 0.248257, 0.221972, 0.207822
#*# 	  0.136602, 0.168545, 0.193226, 0.236812, 0.257806, 0.278205, 0.338000, 0.345423, 0.358404, 0.392890, 0.427353, 0.404585, 0.425911, 0.452863, 0.415032, 0.411514, 0.437260, 0.416781, 0.391151, 0.402486, 0.374758, 0.355049, 0.347066, 0.317415, 0.295443, 0.284570, 0.246367, 0.225869, 0.216557, 0.191894
#*# 	  0.144580, 0.173974, 0.204018, 0.236536, 0.265173, 0.298798, 0.329482, 0.349865, 0.383378, 0.413523, 0.414256, 0.437300, 0.452499, 0.437188, 0.444858, 0.449648, 0.426028, 0.420102, 0.418027, 0.402954, 0.381138, 0.367725, 0.347029, 0.325790, 0.307184, 0.277268, 0.253507, 0.234217, 0.208117, 0.189184
#*# 	  0.133635, 0.166073, 0.221691, 0.239527, 0.265008, 0.321356, 0.358609, 0.360115, 0.398447, 0.441309, 0.425170, 0.454519, 0.477309, 0.466142, 0.448976, 0.475800, 0.453153, 0.433392, 0.446101, 0.417039, 0.389014, 0.392833, 0.359504, 0.326046, 0.323878, 0.295593, 0.241792, 0.233854, 0.212210, 0.181069
#*# 	  0.126782, 0.175893, 0.199780, 0.245740, 0.282865, 0.319276, 0.347953, 0.387165, 0.408154, 0.437543, 0.464828, 0.462864, 0.478138, 0.489900, 0.472045, 0.477167, 0.482322, 0.454804, 0.447856, 0.439192, 0.418557, 0.394705, 0.373453, 0.353676, 0.324601, 0.294391, 0.264934, 0.238035, 0.211575, 0.187012
#*# 	  0.133293, 0.175551, 0.218060, 0.250137, 0.289092, 0.343259, 0.352271, 0.397397, 0.439067, 0.454829, 0.455859, 0.500862, 0.492026, 0.479476, 0.515387, 0.493060, 0.468851, 0.495193, 0.465223, 0.433305, 0.442444, 0.413892, 0.376209, 0.358878, 0.342673, 0.307885, 0.265851, 0.246277, 0.216653, 0.191617
#*# 	  0.131794, 0.183774, 0.217242, 0.250246, 0.303471, 0.340471, 0.368914, 0.410717, 0.445517, 0.459337, 0.482111, 0.506818, 0.497781, 0.508077, 0.515673, 0.499378, 0.499727, 0.495260, 0.474531, 0.461008, 0.445937, 0.418164, 0.395713, 0.376704, 0.342493, 0.308051, 0.275617, 0.247064, 0.213964, 0.184976
#*# 	  0.142928, 0.187419, 0.224315, 0.269087, 0.311414, 0.339133, 0.374574, 0.428185, 0.449084, 0.462068, 0.514004, 0.510282, 0.498643, 0.538403, 0.521459, 0.500860, 0.523905, 0.502568, 0.476503, 0.482091, 0.461634, 0.426139, 0.404358, 0.387098, 0.346468, 0.318558, 0.286983, 0.245484, 0.218393, 0.185641
#*# 	  0.152495, 0.193126, 0.231161, 0.261402, 0.313218, 0.356120, 0.387863, 0.417930, 0.459052, 0.481420, 0.492853, 0.521014, 0.526965, 0.517717, 0.523145, 0.528583, 0.507712, 0.504196, 0.491478, 0.472619, 0.455545, 0.433484, 0.409668, 0.384610, 0.353395, 0.316940, 0.282867, 0.251477, 0.217435, 0.186702
#*# 	  0.143745, 0.185914, 0.236234, 0.276692, 0.312005, 0.342534, 0.400753, 0.421907, 0.444204, 0.493621, 0.498090, 0.498656, 0.534156, 0.523650, 0.508941, 0.531181, 0.511250, 0.490843, 0.486832, 0.479912, 0.443015, 0.433907, 0.411021, 0.375296, 0.344753, 0.318008, 0.273782, 0.238826, 0.213611, 0.173949
#*# 	  0.142297, 0.182518, 0.220196, 0.262817, 0.303174, 0.341416, 0.373526, 0.405895, 0.440170, 0.466700, 0.482208, 0.492868, 0.510106, 0.509383, 0.504050, 0.504430, 0.503288, 0.483452, 0.473470, 0.458672, 0.436899, 0.416155, 0.390671, 0.365705, 0.337380, 0.301608, 0.270832, 0.238762, 0.202875, 0.173144
#*# 	  0.120117, 0.164534, 0.214933, 0.244878, 0.279156, 0.334842, 0.356743, 0.383880, 0.425749, 0.444488, 0.449705, 0.484648, 0.480731, 0.473859, 0.485768, 0.491699, 0.463007, 0.464732, 0.460417, 0.424592, 0.409783, 0.402496, 0.369545, 0.337334, 0.323257, 0.290039, 0.246889, 0.223754, 0.190768, 0.163434
#*# 	  0.098144, 0.146126, 0.183299, 0.217064, 0.258863, 0.295754, 0.327666, 0.357705, 0.388035, 0.410116, 0.425668, 0.439358, 0.445667, 0.449424, 0.449714, 0.445010, 0.441444, 0.430942, 0.418256, 0.401642, 0.384657, 0.361471, 0.339392, 0.317841, 0.289902, 0.261344, 0.235687, 0.200688, 0.166345, 0.139882
#*# 	  0.080596, 0.126630, 0.164375, 0.191852, 0.229618, 0.265265, 0.287350, 0.327790, 0.351310, 0.362835, 0.392849, 0.405887, 0.394633, 0.408170, 0.416446, 0.395681, 0.397007, 0.397691, 0.375593, 0.354246, 0.351368, 0.327400, 0.294425, 0.283564, 0.255795, 0.231459, 0.208803, 0.166689, 0.141302, 0.115645
#*# 	  0.061685, 0.105188, 0.138044, 0.163106, 0.201884, 0.234919, 0.259232, 0.285162, 0.314942, 0.334522, 0.343258, 0.353782, 0.362491, 0.363237, 0.363498, 0.361320, 0.356047, 0.346723, 0.335366, 0.322643, 0.308797, 0.289327, 0.267901, 0.245448, 0.222914, 0.200741, 0.176251, 0.143253, 0.115464, 0.092799
#*# 	  0.050026, 0.088454, 0.119509, 0.144055, 0.176746, 0.200611, 0.234818, 0.252851, 0.276278, 0.300058, 0.311253, 0.309141, 0.321584, 0.330146, 0.321993, 0.313231, 0.318971, 0.305226, 0.291140, 0.288343, 0.269883, 0.253535, 0.237018, 0.209967, 0.190385, 0.173818, 0.147302, 0.116031, 0.094769, 0.069734
#*# 	  0.045253, 0.085159, 0.094214, 0.126715, 0.163008, 0.183609, 0.200614, 0.225296, 0.252414, 0.261300, 0.270230, 0.277400, 0.279218, 0.285208, 0.283085, 0.278745, 0.275504, 0.269151, 0.257939, 0.249040, 0.236915, 0.222907, 0.201209, 0.182098, 0.167071, 0.143652, 0.125290, 0.099117, 0.078317, 0.059941
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 1
#*# mesh_y_pps = 1
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 0.0
#*# max_x = 180.0
#*# min_y = 55.0
#*# max_y = 227.0
