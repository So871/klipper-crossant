[include tmc5160.cfg]
[include tmc2209.cfg]
[include mainsail.cfg]
[include tempsensors.cfg]
[include fans.cfg]
[include mcu.cfg]
[include THR.cfg]
[include beacon.cfg]
[include config_backup.cfg]
[include TEST_SPEED.cfg]
[include ztilt.cfg]
[include macros.cfg]
[include reshelper.cfg]
[include KAMP_Settings.cfg]

[exclude_object]

##========================== Pin Definitions ========================
## X
## Drive0_STEP_PIN         PE2
## Drive0_DIR_PIN          PC5
## Drive0_ENABLE_PIN       PF11
## Drive0_STOP_PIN         PG12 #IO0
## Drive0_UART_PIN         PC4

## Y
## Drive1_STEP_PIN         PE3
## Drive1_DIR_PIN          PF13
## Drive1_ENABLE_PIN       PF14
## Drive1_STOP_PIN         PG11 #IO1
## Drive1_UART_PIN         PF12

## E
## Drive2_STEP_PIN         PE4
## Drive2_DIR_PIN          PG0
## Drive2_ENABLE_PIN       PG1
## Drive2_STOP_PIN         PG10 #IO2
## Drive2_UART_PIN         PF15

## Z
## Drive3_STEP_PIN         PE14
## Drive3_DIR_PIN          PE8
## Drive3_ENABLE_PIN       PE9
## Drive3_STOP_PIN         PG9 #IO3
## Drive3_UART_PIN         PE7

## Z1
## Drive4_STEP_PIN         PE15
## Drive4_DIR_PIN          PE11
## Drive4_ENABLE_PIN       PF2
## Drive4_UART_PIN         PE10

## Z2
## Drive5_STEP_PIN         PE1
## Drive5_DIR_PIN          PF0
## Drive5_ENABLE_PIN       PC15
## Drive5_UART_PIN         PF1

## Z3
## Drive6_STEP_PIN         PE0
## Drive6_DIR_PIN          PG3
## Drive6_ENABLE_PIN       PG4
## Drive6_UART_PIN         PG2

## Drive7_STEP_PIN         PE6
## Drive7_DIR_PIN          PG6
## Drive7_ENABLE_PIN       PG7
## Drive7_UART_PIN         PG5

##   TMC SPI MODE
## TMC MOSI           PB4
## TMC MISO           PB5
## TMC SCK            PB3

## HEAT0              PB0
## HEAT1              PB1
## HEAT2              PC7
## HEAT3              PF7
## HEAT4              PF6

## BED                PE5

## TH0 (H0 Temp)      PF4    #ADC0
## TH1 (H1 Temp)      PF5    #ADC1
## TH2 (H2 Temp)      PF9    #ADC2
## TH3 (H3 Temp)      PF10   #ADC3
## TH4 (H4 Temp)      PC0    #ADC4
## TB  (Bed Temp)     PC1    #ADC5

## FAN0               PA0
## FAN1               PA1
## FAN2               PA2
## FAN3               PA3
## FAN4               PA15
## FAN5               PB11
## FAN6               PB10
## FAN7               PD12
## FAN8               PD14
## FAN9               PD15

## SERVO              PC6   #BLTOUCH
## PROBE			  PC3   #BLTOUCH


##########################################
# 5V # GND # PD0 # PD1 # PD3 # PD4 # PD5 #
##########################################



[printer]
kinematics: cartesian
max_velocity: 300  
max_accel: 20000
max_z_velocity: 15
max_z_accel: 350
square_corner_velocity: 5.0
#minimum_cruise_ratio: 1

[input_shaper]
shaper_freq_x: 84.6
shaper_type_x: mzv
shaper_freq_y: 84.6
shaper_type_y: mzv

########################################
# Drives
########################################

[stepper_x]
step_pin: PE0
dir_pin: PG3
enable_pin: !PG4
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
endstop_pin: !PD6
position_endstop: 0
position_min: 0
position_max: 210
homing_retract_dist: 10.0
homing_speed: 50


[stepper_x1]
step_pin: PE1
dir_pin: !PF0
enable_pin: !PC15
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper

[stepper_y]
step_pin: PE15
dir_pin: PE11
enable_pin: !PF2
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
endstop_pin: !PA8
position_endstop: 5
position_min: 5
position_max: 227
homing_retract_dist: 10.0
homing_speed: 50

[stepper_y1]
step_pin: PE14
dir_pin: PE8
enable_pin: !PE9
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper


[stepper_z]
step_pin: PE4
dir_pin: PG0
enable_pin: !PG1
microsteps: 128
rotation_distance: 40
gear_ratio: 4:1
full_steps_per_rotation: 200
#step_pulse_duration: 0.000004
endstop_pin: probe:z_virtual_endstop # use beacon as virtual endstop
homing_retract_dist: 0 # beacon needs this to be set to 0
position_min: -2
position_max: 185
homing_positive_dir: false
homing_speed: 40

[stepper_z1]
step_pin: PE3
dir_pin: PF13
enable_pin: !PF14
microsteps: 128
rotation_distance: 40
gear_ratio: 4:1
full_steps_per_rotation: 200


[stepper_z2]
step_pin: PE2
dir_pin: !PC5
enable_pin: !PF11
microsteps: 128
rotation_distance: 40
gear_ratio: 4:1
full_steps_per_rotation: 200


[heater_bed]
heater_pin: PB0
sensor_pin: PC0
sensor_type: Generic 3950
#control: watermark
min_temp: -50
max_temp: 200

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE12, EXP1_3=PB2, EXP1_5=PC14, EXP1_7=PG14, EXP1_9=<GND>,
    EXP1_2=PE13, EXP1_4=PG8, EXP1_6=PC13, EXP1_8=PG13, EXP1_10=<5V>,
    # EXP2 header
    EXP2_1=PA6, EXP2_3=PB7, EXP2_5=PB6, EXP2_7=PG15,  EXP2_9=<GND>,
    EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

########################################
 #Mini 12864 LCD
########################################
#[display]
#lcd_type: uc1701
#cs_pin: EXP1_3
#a0_pin: EXP1_4
#rst_pin: EXP1_5
#contrast: 63
#encoder_pins: ^EXP2_5, ^!EXP2_3
#click_pin: ^!EXP1_2
#spi_bus: spi1

#####FLY Mini12864
#[neopixel fly_mini12864]
#pin: EXP1_6
#chain_count: 3
#initial_RED: 0.1
#initial_GREEN: 0.5
#initial_BLUE: 0.0
#color_order: RGB

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 45.335
#*# pid_ki = 1.275
#*# pid_kd = 402.910
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.629914, -0.637302, -0.648225, -0.659671, -0.649829, -0.641284, -0.636983, -0.632218, -0.628129, -0.622815, -0.617086, -0.612283, -0.609408, -0.606573, -0.608242, -0.611893, -0.617781, -0.607419, -0.613309, -0.623673, -0.628612, -0.627130, -0.635861, -0.637357, -0.629883, -0.627935, -0.650098, -0.641576, -0.628421, -0.608246
#*# 	  -0.451607, -0.454306, -0.458974, -0.463515, -0.452413, -0.448646, -0.448658, -0.441457, -0.434501, -0.430103, -0.422494, -0.415911, -0.412815, -0.412881, -0.412876, -0.415574, -0.414424, -0.414279, -0.420991, -0.427333, -0.428433, -0.436161, -0.445046, -0.440302, -0.434999, -0.449159, -0.447603, -0.441423, -0.440594, -0.437899
#*# 	  -0.399782, -0.405532, -0.397390, -0.397527, -0.398285, -0.389342, -0.380003, -0.377232, -0.371533, -0.362205, -0.351594, -0.348813, -0.346505, -0.332804, -0.343984, -0.348353, -0.348550, -0.344674, -0.350488, -0.359871, -0.364009, -0.363977, -0.376540, -0.378928, -0.371454, -0.373785, -0.391879, -0.380697, -0.379256, -0.380298
#*# 	  -0.367645, -0.366800, -0.368186, -0.369629, -0.355612, -0.348325, -0.345419, -0.335590, -0.326989, -0.318860, -0.312168, -0.304040, -0.301595, -0.300844, -0.301367, -0.305131, -0.305907, -0.302127, -0.307843, -0.315355, -0.317049, -0.326106, -0.334955, -0.331430, -0.329533, -0.345551, -0.348421, -0.344471, -0.348473, -0.350004
#*# 	  -0.344657, -0.346133, -0.333029, -0.330305, -0.329069, -0.317167, -0.303732, -0.296801, -0.289409, -0.270178, -0.268800, -0.270525, -0.262388, -0.259396, -0.260747, -0.264651, -0.265841, -0.260830, -0.266335, -0.275197, -0.278118, -0.279261, -0.290109, -0.296198, -0.291252, -0.295665, -0.317034, -0.312611, -0.313543, -0.317859
#*# 	  -0.322394, -0.314076, -0.311746, -0.302933, -0.291318, -0.282149, -0.275322, -0.263550, -0.252355, -0.242970, -0.234043, -0.227726, -0.224730, -0.224214, -0.224945, -0.228083, -0.227227, -0.226667, -0.233131, -0.238960, -0.243267, -0.247893, -0.259349, -0.257499, -0.257566, -0.276342, -0.282643, -0.282725, -0.293722, -0.298868
#*# 	  -0.302546, -0.297257, -0.282269, -0.274089, -0.267908, -0.251360, -0.236770, -0.235022, -0.219269, -0.206983, -0.196399, -0.191975, -0.189014, -0.186081, -0.187042, -0.191337, -0.194191, -0.189011, -0.194753, -0.202832, -0.205483, -0.209037, -0.221403, -0.229018, -0.227550, -0.234870, -0.276123, -0.252748, -0.264085, -0.276657
#*# 	  -0.281284, -0.267348, -0.260843, -0.253282, -0.231054, -0.219542, -0.208006, -0.194962, -0.181024, -0.171712, -0.162186, -0.154887, -0.151312, -0.150125, -0.150574, -0.153789, -0.154110, -0.154201, -0.160134, -0.166311, -0.168832, -0.179146, -0.191415, -0.187358, -0.202071, -0.217108, -0.228569, -0.233226, -0.247248, -0.258869
#*# 	  -0.262259, -0.250667, -0.230015, -0.224777, -0.202524, -0.184729, -0.167763, -0.156643, -0.144817, -0.131122, -0.119908, -0.114135, -0.110678, -0.107289, -0.108764, -0.113624, -0.115576, -0.113288, -0.119894, -0.128287, -0.132844, -0.137798, -0.161616, -0.152212, -0.164276, -0.175704, -0.203831, -0.208001, -0.217430, -0.233743
#*# 	  -0.243003, -0.224757, -0.211615, -0.198696, -0.169847, -0.152475, -0.138629, -0.121204, -0.102297, -0.100840, -0.084463, -0.076676, -0.072033, -0.071830, -0.072723, -0.075350, -0.075886, -0.075216, -0.082247, -0.090168, -0.095801, -0.106535, -0.121187, -0.125417, -0.132388, -0.156665, -0.171670, -0.176223, -0.199132, -0.215744
#*# 	  -0.232008, -0.211600, -0.187755, -0.171138, -0.152133, -0.127102, -0.104961, -0.089752, -0.074489, -0.059061, -0.046794, -0.040069, -0.035653, -0.032951, -0.034695, -0.039055, -0.040377, -0.038086, -0.044949, -0.043222, -0.063952, -0.070467, -0.087212, -0.098232, -0.104382, -0.118304, -0.149049, -0.158095, -0.171456, -0.192591
#*# 	  -0.220857, -0.195818, -0.177900, -0.159112, -0.128004, -0.103674, -0.086348, -0.064224, -0.043021, -0.028828, -0.021693, -0.006930, 0.002493, -0.002671, -0.002540, -0.005605, -0.005934, -0.007266, -0.015467, -0.024242, -0.030465, -0.043306, -0.060275, -0.066265, -0.076962, -0.103444, -0.123292, -0.135138, -0.158075, -0.180331
#*# 	  -0.218454, -0.190978, -0.160406, -0.139960, -0.115339, -0.086811, -0.061008, -0.041158, -0.020922, -0.003181, 0.011053, 0.018765, 0.021595, 0.026025, 0.025565, 0.033777, 0.017607, 0.007581, 0.011847, -0.000793, -0.010089, -0.019155, -0.037189, -0.051897, -0.060730, -0.077589, -0.112525, -0.126767, -0.142353, -0.171560
#*# 	  -0.215660, -0.186602, -0.160490, -0.137948, -0.102951, -0.075799, -0.052668, -0.027794, -0.004244, 0.013213, 0.027251, 0.038493, 0.043491, 0.053609, 0.038399, 0.042370, 0.038945, 0.035938, 0.027975, 0.016518, 0.008257, -0.005518, -0.023751, -0.032864, -0.047103, -0.077898, -0.101730, -0.116813, -0.143893, -0.169497
#*# 	  -0.218169, -0.185888, -0.149852, -0.124890, -0.097307, -0.063375, -0.033395, -0.009849, 0.012711, 0.032339, 0.048427, 0.056955, 0.062936, 0.050301, 0.082002, 0.063553, 0.058287, 0.057348, 0.048293, 0.035748, 0.025436, 0.013551, -0.007061, -0.024625, -0.037644, -0.058999, -0.098853, -0.116557, -0.137447, -0.167900
#*# 	  -0.213583, -0.177773, -0.147452, -0.120248, -0.079598, -0.048009, -0.023425, 0.004846, 0.030547, 0.049643, 0.065506, 0.077188, 0.083292, 0.086169, 0.086708, 0.084265, 0.080193, 0.083510, 0.061469, 0.054416, 0.044982, 0.027756, 0.006842, -0.005434, -0.023757, -0.056354, -0.082578, -0.102724, -0.133816, -0.165416
#*# 	  -0.210707, -0.173215, -0.134048, -0.103996, -0.072213, -0.033374, -0.001653, 0.024834, 0.050889, 0.073319, 0.104413, 0.099680, 0.089466, 0.111241, 0.111191, 0.106839, 0.102284, 0.100056, 0.089790, 0.077451, 0.065535, 0.052162, 0.030826, 0.008907, -0.006427, -0.031777, -0.072464, -0.095195, -0.119196, -0.154799
#*# 	  -0.204685, -0.164594, -0.129722, -0.096653, -0.054523, -0.017295, 0.012014, 0.042294, 0.072140, 0.092280, 0.107405, 0.119874, 0.128004, 0.130118, 0.131352, 0.128978, 0.125719, 0.121963, 0.111468, 0.096195, 0.088737, 0.072600, 0.048695, 0.032792, 0.012415, -0.022976, -0.054135, -0.076539, -0.110592, -0.145998
#*# 	  -0.201496, -0.157991, -0.114700, -0.081675, -0.042715, -0.002869, 0.031206, 0.060267, 0.077471, 0.126594, 0.127625, 0.140604, 0.147763, 0.152052, 0.153289, 0.149646, 0.145370, 0.143466, 0.133231, 0.120850, 0.107430, 0.092617, 0.069703, 0.048053, 0.028723, -0.000331, -0.042833, -0.075945, -0.096154, -0.133827
#*# 	  -0.190482, -0.146156, -0.107394, -0.062898, -0.029103, 0.012868, 0.044098, 0.076023, 0.106851, 0.127884, 0.143774, 0.157156, 0.164062, 0.167566, 0.168229, 0.165437, 0.162496, 0.158659, 0.147714, 0.135489, 0.122330, 0.105992, 0.082685, 0.064720, 0.042702, 0.003997, -0.029437, -0.054876, -0.091592, -0.128139
#*# 	  -0.182804, -0.135425, -0.090495, -0.055433, -0.018205, 0.037930, 0.061846, 0.092851, 0.122731, 0.144912, 0.161502, 0.173200, 0.180269, 0.184746, 0.185806, 0.182069, 0.178876, 0.174091, 0.164891, 0.151089, 0.137397, 0.123064, 0.098802, 0.067460, 0.058826, 0.024597, -0.020185, -0.050446, -0.078438, -0.118753
#*# 	  -0.172084, -0.126288, -0.085835, -0.050225, -0.002748, 0.036906, 0.068956, 0.107861, 0.127074, 0.154119, 0.170163, 0.183636, 0.190584, 0.192240, 0.193317, 0.191220, 0.188302, 0.182951, 0.172719, 0.159690, 0.147682, 0.129500, 0.106228, 0.087912, 0.063198, 0.026485, -0.010296, -0.036991, -0.073305, -0.112923
#*# 	  -0.169255, -0.121790, -0.075821, -0.042398, 0.000911, 0.042644, 0.076683, 0.108404, 0.137184, 0.161406, 0.176998, 0.188811, 0.195676, 0.198443, 0.198764, 0.194741, 0.190286, 0.185619, 0.176299, 0.160970, 0.156697, 0.132893, 0.103539, 0.085843, 0.065570, 0.034228, -0.007398, -0.040110, -0.069930, -0.112054
#*# 	  -0.171721, -0.122996, -0.083292, -0.049479, -0.002678, 0.036372, 0.066029, 0.100560, 0.130470, 0.148083, 0.167673, 0.184403, 0.188930, 0.189829, 0.189325, 0.186700, 0.182535, 0.177106, 0.166344, 0.153894, 0.139989, 0.122718, 0.099849, 0.080155, 0.058333, 0.023995, -0.009355, -0.040828, -0.078391, -0.117375
#*# 	  -0.182243, -0.135968, -0.090731, -0.057303, -0.016699, 0.022870, 0.056645, 0.085948, 0.115543, 0.136867, 0.152439, 0.163558, 0.172054, 0.174253, 0.174588, 0.172408, 0.167288, 0.162060, 0.145914, 0.145761, 0.125095, 0.109585, 0.087108, 0.065218, 0.043123, 0.017809, -0.021410, -0.055874, -0.084894, -0.124895
#*# 	  -0.196934, -0.149248, -0.110040, -0.079329, -0.036972, 0.002324, 0.032607, 0.062693, 0.091075, 0.110134, 0.124171, 0.137042, 0.145491, 0.143543, 0.146207, 0.144701, 0.139341, 0.135026, 0.126039, 0.112389, 0.099695, 0.083178, 0.061013, 0.043360, 0.021974, -0.006221, -0.039493, -0.071267, -0.105140, -0.141528
#*# 	  -0.213273, -0.168117, -0.131333, -0.098825, -0.061838, -0.024789, 0.006610, 0.033372, 0.058486, 0.077757, 0.089155, 0.100614, 0.108838, 0.109671, 0.102139, 0.115078, 0.102292, 0.098871, 0.087969, 0.076183, 0.064025, 0.049430, 0.027156, 0.005782, -0.012593, -0.032841, -0.071017, -0.104746, -0.130594, -0.171223
#*# 	  -0.230886, -0.188865, -0.155410, -0.128304, -0.091391, -0.054973, -0.029365, -0.004604, 0.023690, 0.038492, 0.047642, 0.058719, 0.066297, 0.067117, 0.068175, 0.066154, 0.061355, 0.056639, 0.047154, 0.036305, 0.025085, 0.009174, -0.010824, -0.026809, -0.045498, -0.069353, -0.102334, -0.131199, -0.160448, -0.193721
#*# 	  -0.243724, -0.203643, -0.172005, -0.147081, -0.113486, -0.080195, -0.057494, -0.034410, -0.007943, 0.006660, 0.008914, 0.028386, 0.029655, 0.023423, 0.028429, 0.027311, 0.023220, 0.018625, 0.010749, -0.002598, -0.012274, -0.025267, -0.046654, -0.063403, -0.076529, -0.097228, -0.133760, -0.160304, -0.182977, -0.216690
#*# 	  -0.250886, -0.215302, -0.198629, -0.165973, -0.130653, -0.107649, -0.087682, -0.059218, -0.035700, -0.028075, -0.021296, -0.013394, -0.008907, -0.008501, -0.007517, -0.009969, -0.015093, -0.018415, -0.025979, -0.037361, -0.047266, -0.061140, -0.079228, -0.094123, -0.107695, -0.128503, -0.157032, -0.181607, -0.205924, -0.231189
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 1
#*# mesh_y_pps = 1
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 0.0
#*# max_x = 180.0
#*# min_y = 55.0
#*# max_y = 227.0
#*#
#*# [beacon model default]
#*# model_coef = 1.5158126741642723,
#*# 	1.8499409937418005,
#*# 	0.8004033155765673,
#*# 	0.42099394677878926,
#*# 	0.32309805533266583,
#*# 	0.20953969019969323,
#*# 	-0.20712238114028478,
#*# 	-0.216433447201365,
#*# 	0.16869456928574558,
#*# 	0.13921462747095315
#*# model_domain = 1.861738972080913e-07,1.9399830949956476e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 30.594640
#*# model_offset = 0.00000
