[include tmc5160.cfg]
[include tmc2209.cfg]
[include mainsail.cfg]
[include tempsensors.cfg]
[include fans.cfg]
[include mcu.cfg]
[include THR.cfg]
[include beacon.cfg]
[include config_backup.cfg]
[include TEST_SPEED.cfg]
[include ztilt.cfg]
[include macros.cfg]
[include reshelper.cfg]
[include KAMP_Settings.cfg]
[include Line_Purge.cfg]

[exclude_object]

##========================== Pin Definitions ========================
## X
## Drive0_STEP_PIN         PE2
## Drive0_DIR_PIN          PC5
## Drive0_ENABLE_PIN       PF11
## Drive0_STOP_PIN         PG12 #IO0
## Drive0_UART_PIN         PC4

## Y
## Drive1_STEP_PIN         PE3
## Drive1_DIR_PIN          PF13
## Drive1_ENABLE_PIN       PF14
## Drive1_STOP_PIN         PG11 #IO1
## Drive1_UART_PIN         PF12

## E
## Drive2_STEP_PIN         PE4
## Drive2_DIR_PIN          PG0
## Drive2_ENABLE_PIN       PG1
## Drive2_STOP_PIN         PG10 #IO2
## Drive2_UART_PIN         PF15

## Z
## Drive3_STEP_PIN         PE14
## Drive3_DIR_PIN          PE8
## Drive3_ENABLE_PIN       PE9
## Drive3_STOP_PIN         PG9 #IO3
## Drive3_UART_PIN         PE7

## Z1
## Drive4_STEP_PIN         PE15
## Drive4_DIR_PIN          PE11
## Drive4_ENABLE_PIN       PF2
## Drive4_UART_PIN         PE10

## Z2
## Drive5_STEP_PIN         PE1
## Drive5_DIR_PIN          PF0
## Drive5_ENABLE_PIN       PC15
## Drive5_UART_PIN         PF1

## Z3
## Drive6_STEP_PIN         PE0
## Drive6_DIR_PIN          PG3
## Drive6_ENABLE_PIN       PG4
## Drive6_UART_PIN         PG2

## Drive7_STEP_PIN         PE6
## Drive7_DIR_PIN          PG6
## Drive7_ENABLE_PIN       PG7
## Drive7_UART_PIN         PG5

##   TMC SPI MODE
## TMC MOSI           PB4
## TMC MISO           PB5
## TMC SCK            PB3

## HEAT0              PB0
## HEAT1              PB1
## HEAT2              PC7
## HEAT3              PF7
## HEAT4              PF6

## BED                PE5

## TH0 (H0 Temp)      PF4    #ADC0
## TH1 (H1 Temp)      PF5    #ADC1
## TH2 (H2 Temp)      PF9    #ADC2
## TH3 (H3 Temp)      PF10   #ADC3
## TH4 (H4 Temp)      PC0    #ADC4
## TB  (Bed Temp)     PC1    #ADC5

## FAN0               PA0
## FAN1               PA1
## FAN2               PA2
## FAN3               PA3
## FAN4               PA15
## FAN5               PB11
## FAN6               PB10
## FAN7               PD12
## FAN8               PD14
## FAN9               PD15

## SERVO              PC6   #BLTOUCH
## PROBE			  PC3   #BLTOUCH


##########################################
# 5V # GND # PD0 # PD1 # PD3 # PD4 # PD5 #
##########################################



[printer]
kinematics: cartesian
max_velocity: 300  
max_accel: 20000
max_z_velocity: 15
max_z_accel: 350
square_corner_velocity: 5.0
#minimum_cruise_ratio: 1

[input_shaper]
shaper_freq_x: 84.6
shaper_type_x: mzv
shaper_freq_y: 84.6
shaper_type_y: mzv

########################################
# Drives
########################################

[stepper_x]
step_pin: PE0
dir_pin: PG3
enable_pin: !PG4
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
endstop_pin: !PD6
position_endstop: 0
position_min: 0
position_max: 210
homing_retract_dist: 10.0
homing_speed: 50


[stepper_x1]
step_pin: PE1
dir_pin: !PF0
enable_pin: !PC15
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper

[stepper_y]
step_pin: PE15
dir_pin: PE11
enable_pin: !PF2
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper
endstop_pin: !PA8
position_endstop: 5
position_min: 5
position_max: 227
homing_retract_dist: 10.0
homing_speed: 50

[stepper_y1]
step_pin: PE14
dir_pin: PE8
enable_pin: !PE9
rotation_distance: 40
microsteps: 16
full_steps_per_rotation:200  #set to 400 for 0.9 degree stepper


[stepper_z]
step_pin: PE4
dir_pin: PG0
enable_pin: !PG1
microsteps: 128
rotation_distance: 40
gear_ratio: 4:1
full_steps_per_rotation: 200
#step_pulse_duration: 0.000004
endstop_pin: probe:z_virtual_endstop # use beacon as virtual endstop
homing_retract_dist: 0 # beacon needs this to be set to 0
position_min: -2
position_max: 185
homing_positive_dir: false
homing_speed: 40

[stepper_z1]
step_pin: PE3
dir_pin: PF13
enable_pin: !PF14
microsteps: 128
rotation_distance: 40
gear_ratio: 4:1
full_steps_per_rotation: 200


[stepper_z2]
step_pin: PE2
dir_pin: !PC5
enable_pin: !PF11
microsteps: 128
rotation_distance: 40
gear_ratio: 4:1
full_steps_per_rotation: 200


[heater_bed]
heater_pin: PB0
sensor_pin: PC0
sensor_type: Generic 3950
#control: watermark
min_temp: -50
max_temp: 200

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE12, EXP1_3=PB2, EXP1_5=PC14, EXP1_7=PG14, EXP1_9=<GND>,
    EXP1_2=PE13, EXP1_4=PG8, EXP1_6=PC13, EXP1_8=PG13, EXP1_10=<5V>,
    # EXP2 header
    EXP2_1=PA6, EXP2_3=PB7, EXP2_5=PB6, EXP2_7=PG15,  EXP2_9=<GND>,
    EXP2_2=PA5, EXP2_4=PA4, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<5V>

########################################
 #Mini 12864 LCD
########################################
#[display]
#lcd_type: uc1701
#cs_pin: EXP1_3
#a0_pin: EXP1_4
#rst_pin: EXP1_5
#contrast: 63
#encoder_pins: ^EXP2_5, ^!EXP2_3
#click_pin: ^!EXP1_2
#spi_bus: spi1

#####FLY Mini12864
#[neopixel fly_mini12864]
#pin: EXP1_6
#chain_count: 3
#initial_RED: 0.1
#initial_GREEN: 0.5
#initial_BLUE: 0.0
#color_order: RGB

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 45.335
#*# pid_ki = 1.275
#*# pid_kd = 402.910
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.664769, -0.682442, -0.680370, -0.683973, -0.690491, -0.675377, -0.663320, -0.670430, -0.673607, -0.657155, -0.646177, -0.647997, -0.634870, -0.623830, -0.634104, -0.628845, -0.620117, -0.618468, -0.623813, -0.626852, -0.630433, -0.630719, -0.633924, -0.637702, -0.624132, -0.623676, -0.633207, -0.625166, -0.600842, -0.567892
#*# 	  -0.484875, -0.484097, -0.486142, -0.490073, -0.486986, -0.474526, -0.474762, -0.470061, -0.462670, -0.452034, -0.446745, -0.436919, -0.426790, -0.425735, -0.423912, -0.419028, -0.416674, -0.416367, -0.418210, -0.417913, -0.425549, -0.433024, -0.431782, -0.429165, -0.428316, -0.432286, -0.421926, -0.415335, -0.401227, -0.385751
#*# 	  -0.434393, -0.440193, -0.414867, -0.436648, -0.430291, -0.409949, -0.392461, -0.411077, -0.397227, -0.379347, -0.383574, -0.366787, -0.352997, -0.363621, -0.353633, -0.346579, -0.356645, -0.345262, -0.344236, -0.363497, -0.358115, -0.359352, -0.376976, -0.370565, -0.359662, -0.360243, -0.373384, -0.353420, -0.343075, -0.328588
#*# 	  -0.402692, -0.396975, -0.401974, -0.391241, -0.387347, -0.373876, -0.372068, -0.362239, -0.355198, -0.339853, -0.330624, -0.322115, -0.313718, -0.311299, -0.311674, -0.307683, -0.303437, -0.306585, -0.308198, -0.308817, -0.316541, -0.324255, -0.326656, -0.320952, -0.324413, -0.331925, -0.325970, -0.319816, -0.310826, -0.297908
#*# 	  -0.381797, -0.376251, -0.366696, -0.372718, -0.356945, -0.336815, -0.343671, -0.321636, -0.306129, -0.310155, -0.286855, -0.269711, -0.285233, -0.268836, -0.256827, -0.279696, -0.268274, -0.256921, -0.279835, -0.274678, -0.272471, -0.279712, -0.298315, -0.288651, -0.282883, -0.286032, -0.296222, -0.287979, -0.279583, -0.272276
#*# 	  -0.359917, -0.348505, -0.346307, -0.346341, -0.322359, -0.308520, -0.304939, -0.287692, -0.276670, -0.263421, -0.252918, -0.241560, -0.235327, -0.235063, -0.231297, -0.232114, -0.235880, -0.231490, -0.237388, -0.239675, -0.241365, -0.252615, -0.255882, -0.249094, -0.259385, -0.263512, -0.266025, -0.265386, -0.262744, -0.255330
#*# 	  -0.342253, -0.329051, -0.330321, -0.305743, -0.290301, -0.292453, -0.263324, -0.239235, -0.251233, -0.227032, -0.197527, -0.218150, -0.200160, -0.181779, -0.209431, -0.197914, -0.187540, -0.194799, -0.212995, -0.198409, -0.203059, -0.220006, -0.228454, -0.224325, -0.226630, -0.232910, -0.240250, -0.242984, -0.242551, -0.239721
#*# 	  -0.317791, -0.304283, -0.291771, -0.285315, -0.269872, -0.244549, -0.234645, -0.222780, -0.200644, -0.187263, -0.180065, -0.163295, -0.156070, -0.160633, -0.159111, -0.152332, -0.158773, -0.165500, -0.162205, -0.169831, -0.180991, -0.187830, -0.193906, -0.200872, -0.204759, -0.214272, -0.219937, -0.224390, -0.226254, -0.224913
#*# 	  -0.303149, -0.294354, -0.267558, -0.237835, -0.243998, -0.215023, -0.178343, -0.193647, -0.165263, -0.136770, -0.147737, -0.124874, -0.104629, -0.131129, -0.132125, -0.104398, -0.108241, -0.130223, -0.129348, -0.123507, -0.150669, -0.148800, -0.153877, -0.178523, -0.171672, -0.180036, -0.208911, -0.200365, -0.205293, -0.209606
#*# 	  -0.282762, -0.263904, -0.252435, -0.226046, -0.206612, -0.180665, -0.162982, -0.147364, -0.128746, -0.106847, -0.096043, -0.091298, -0.074525, -0.077576, -0.082833, -0.072660, -0.073497, -0.088401, -0.091957, -0.092077, -0.104398, -0.119469, -0.127988, -0.133044, -0.149014, -0.162984, -0.169320, -0.179452, -0.189146, -0.194134
#*# 	  -0.271444, -0.253813, -0.216992, -0.210691, -0.182238, -0.148015, -0.144113, -0.110166, -0.081640, -0.085097, -0.071497, -0.032572, -0.025112, -0.052500, -0.038536, -0.025889, -0.056415, -0.042764, -0.037660, -0.073334, -0.071049, -0.072845, -0.108789, -0.107796, -0.108974, -0.129164, -0.152312, -0.155049, -0.167573, -0.180109
#*# 	  -0.260531, -0.233287, -0.212082, -0.193371, -0.156765, -0.129219, -0.110551, -0.083229, -0.061393, -0.044793, -0.022368, -0.014998, -0.010591, 0.000272, -0.006098, -0.012139, -0.000235, -0.013020, -0.022548, -0.027718, -0.036269, -0.055411, -0.068697, -0.070429, -0.096176, -0.112304, -0.130127, -0.142898, -0.158630, -0.168047
#*# 	  -0.255456, -0.228945, -0.204852, -0.170086, -0.138402, -0.121102, -0.082909, -0.047354, -0.037594, -0.029268, 0.002187, 0.029735, 0.002398, 0.024631, 0.043278, 0.005181, 0.018578, 0.029874, -0.007926, -0.005408, -0.007046, -0.036377, -0.049168, -0.055173, -0.075976, -0.093767, -0.111745, -0.136674, -0.152318, -0.166253
#*# 	  -0.251636, -0.220340, -0.193836, -0.170638, -0.130374, -0.096464, -0.072382, -0.050703, -0.012441, 0.006048, 0.017793, 0.042523, 0.044521, 0.040807, 0.053692, 0.045650, 0.034226, 0.040210, 0.026146, 0.010928, 0.006108, -0.015975, -0.034495, -0.045940, -0.067778, -0.093682, -0.116059, -0.133092, -0.155624, -0.170406
#*# 	  -0.255944, -0.225332, -0.182626, -0.143112, -0.127375, -0.097329, -0.054068, -0.013483, -0.011928, 0.024118, 0.060388, 0.039342, 0.064703, 0.087335, 0.050119, 0.066014, 0.077623, 0.041510, 0.045460, 0.044451, 0.007426, 0.001928, -0.011919, -0.050805, -0.058395, -0.081679, -0.107427, -0.139122, -0.155898, -0.178723
#*# 	  -0.242732, -0.214080, -0.176679, -0.144481, -0.110857, -0.068047, -0.039971, -0.015262, 0.017155, 0.052338, 0.064216, 0.069761, 0.095677, 0.090890, 0.082731, 0.097971, 0.084749, 0.068284, 0.070711, 0.053046, 0.031365, 0.018390, -0.003796, -0.024659, -0.047437, -0.077863, -0.106466, -0.126849, -0.155305, -0.178890
#*# 	  -0.246802, -0.205812, -0.162577, -0.122484, -0.099750, -0.054275, -0.003295, 0.003061, 0.042638, 0.083594, 0.073827, 0.103564, 0.128798, 0.098971, 0.118334, 0.131585, 0.093330, 0.104575, 0.105594, 0.062304, 0.058862, 0.040898, 0.023484, -0.016550, -0.028613, -0.055319, -0.106430, -0.123085, -0.148334, -0.177649
#*# 	  -0.236298, -0.195134, -0.158074, -0.112901, -0.076535, -0.034002, 0.000534, 0.032353, 0.058717, 0.095005, 0.110161, 0.126919, 0.127899, 0.147094, 0.138986, 0.131096, 0.140393, 0.125270, 0.107624, 0.102752, 0.080611, 0.057296, 0.033340, 0.014443, -0.015051, -0.049703, -0.084178, -0.109415, -0.141395, -0.171614
#*# 	  -0.231650, -0.187309, -0.131921, -0.108074, -0.061211, -0.010016, 0.007682, 0.054280, 0.096799, 0.097114, 0.133287, 0.165363, 0.140106, 0.162978, 0.182119, 0.142997, 0.155135, 0.165889, 0.149877, 0.107186, 0.101080, 0.090357, 0.042146, 0.025785, 0.005408, -0.035110, -0.075034, -0.099917, -0.134557, -0.165326
#*# 	  -0.228303, -0.174644, -0.132040, -0.093717, -0.042852, -0.000886, 0.032151, 0.073004, 0.103769, 0.125908, 0.154365, 0.166296, 0.168321, 0.178479, 0.187225, 0.178939, 0.167142, 0.171523, 0.154958, 0.139867, 0.120430, 0.096164, 0.069135, 0.045411, 0.013772, -0.025891, -0.062808, -0.095412, -0.130625, -0.165385
#*# 	  -0.211636, -0.159999, -0.119197, -0.072626, -0.025244, 0.003633, 0.052746, 0.095862, 0.109107, 0.147479, 0.182769, 0.167970, 0.193206, 0.214532, 0.198804, 0.178955, 0.189958, 0.198652, 0.155899, 0.151713, 0.143421, 0.102839, 0.081068, 0.061328, 0.020715, -0.008750, -0.050448, -0.096183, -0.124882, -0.162305
#*# 	  -0.198134, -0.151231, -0.109964, -0.065716, -0.019329, 0.024742, 0.061070, 0.094200, 0.133038, 0.158036, 0.172687, 0.198599, 0.203172, 0.199952, 0.211697, 0.205033, 0.199417, 0.184982, 0.180357, 0.161389, 0.140462, 0.117786, 0.090282, 0.065143, 0.031442, -0.009272, -0.048530, -0.084089, -0.121761, -0.158925
#*# 	  -0.198297, -0.148592, -0.098545, -0.056176, -0.017739, 0.030614, 0.076783, 0.095491, 0.135602, 0.173012, 0.173001, 0.198775, 0.207107, 0.225913, 0.198218, 0.208612, 0.214709, 0.183031, 0.180025, 0.174041, 0.137268, 0.122316, 0.098557, 0.058440, 0.031308, -0.002767, -0.052503, -0.085321, -0.121588, -0.164038
#*# 	  -0.202212, -0.151918, -0.108384, -0.064723, -0.020211, 0.023974, 0.059136, 0.093073, 0.127278, 0.152994, 0.173261, 0.186776, 0.199210, 0.201457, 0.200981, 0.202238, 0.194973, 0.182795, 0.171726, 0.156433, 0.136997, 0.111185, 0.085099, 0.058692, 0.022843, -0.013493, -0.049389, -0.089306, -0.126657, -0.163922
#*# 	  -0.209743, -0.162616, -0.116773, -0.073595, -0.030136, 0.013271, 0.041308, 0.081861, 0.112227, 0.147140, 0.149998, 0.173105, 0.193439, 0.175979, 0.187733, 0.194570, 0.168163, 0.170444, 0.165029, 0.133609, 0.121560, 0.104924, 0.064099, 0.042248, 0.017789, -0.019407, -0.059189, -0.101483, -0.134188, -0.172365
#*# 	  -0.225385, -0.179648, -0.131315, -0.091207, -0.049284, -0.009139, 0.027252, 0.058827, 0.087236, 0.113515, 0.131003, 0.144470, 0.153723, 0.157238, 0.157298, 0.155874, 0.150285, 0.141876, 0.131159, 0.114816, 0.094011, 0.070118, 0.045624, 0.022361, -0.009276, -0.040187, -0.073795, -0.115998, -0.153097, -0.187445
#*# 	  -0.236896, -0.191816, -0.150549, -0.111275, -0.073721, -0.035974, -0.004596, 0.029649, 0.060904, 0.073275, 0.097027, 0.115678, 0.107789, 0.120483, 0.129607, 0.110372, 0.111864, 0.113418, 0.084973, 0.078164, 0.064988, 0.033969, 0.011039, -0.010178, -0.042919, -0.069557, -0.104907, -0.144130, -0.177787, -0.207888
#*# 	  -0.253529, -0.209319, -0.171193, -0.136028, -0.100603, -0.063155, -0.031903, -0.004266, 0.022912, 0.043892, 0.056397, 0.067726, 0.076348, 0.081992, 0.078478, 0.078947, 0.074319, 0.066717, 0.054104, 0.040333, 0.024290, 0.001953, -0.021955, -0.044301, -0.072051, -0.096585, -0.128640, -0.168140, -0.198829, -0.230115
#*# 	  -0.261724, -0.221495, -0.188043, -0.151185, -0.119513, -0.087612, -0.060095, -0.032677, -0.008570, 0.012210, 0.025867, 0.026848, 0.039376, 0.047241, 0.035599, 0.040439, 0.038640, 0.023456, 0.016871, 0.006932, -0.014934, -0.029847, -0.053769, -0.077039, -0.101698, -0.121205, -0.155281, -0.195892, -0.219452, -0.249924
#*# 	  -0.266574, -0.223080, -0.208260, -0.173086, -0.136288, -0.110467, -0.086918, -0.061037, -0.038703, -0.020618, -0.014397, -0.001767, -0.002034, 0.003844, 0.005933, -0.001331, -0.003971, -0.007575, -0.020964, -0.031942, -0.045993, -0.065242, -0.085489, -0.106214, -0.125031, -0.147618, -0.177673, -0.209418, -0.230659, -0.255630
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 1
#*# mesh_y_pps = 1
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 0.0
#*# max_x = 180.0
#*# min_y = 55.0
#*# max_y = 227.0
#*#
#*# [beacon model default]
#*# model_coef = 1.5158126741642723,
#*# 	1.8499409937418005,
#*# 	0.8004033155765673,
#*# 	0.42099394677878926,
#*# 	0.32309805533266583,
#*# 	0.20953969019969323,
#*# 	-0.20712238114028478,
#*# 	-0.216433447201365,
#*# 	0.16869456928574558,
#*# 	0.13921462747095315
#*# model_domain = 1.861738972080913e-07,1.9399830949956476e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 30.594640
#*# model_offset = 0.00000
